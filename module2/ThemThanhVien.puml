@startuml
actor "Admin/PM" as User

participant "U I" as UI
participant "Authorization Service"
participant "Project Group Service" as System
participant "Database" as DB
participant "Notification Service"

User -> UI: Nhập thông tin nhóm dự án và xác nhận tạo nhóm
activate UI

UI -> "Authorization Service": Kiểm tra quyền truy cập
activate "Authorization Service"

"Authorization Service" --> UI: Quyền hợp lệ
deactivate "Authorization Service"

UI -> System: Gửi yêu cầu tạo nhóm dự án
activate System

System -> DB: Kiểm tra trùng lặp tên nhóm
activate DB

alt Tên nhóm chưa tồn tại
    DB --> System: Cho phép tạo nhóm
    deactivate DB

    System -> DB: Lưu nhóm dự án vào cơ sở dữ liệu
    activate DB
    DB --> System: Lưu thành công
    deactivate DB

    System -> "Notification Service": Gửi thông báo nhóm mới
    activate "Notification Service"
    "Notification Service" --> User: Thông báo nhóm dự án đã được tạo
    deactivate "Notification Service"

    System --> UI: Xác nhận nhóm dự án tạo thành công
    deactivate System
    UI --> User: Hiển thị nhóm dự án mới

else Tên nhóm đã tồn tại
    DB --> System: Lỗi - Nhóm dự án đã tồn tại
    deactivate DB
    System --> UI: Hiển thị lỗi "Nhóm dự án đã tồn tại"
    UI --> User: Hiển thị lỗi "Nhóm dự án đã tồn tại"
    deactivate System
end

@enduml
